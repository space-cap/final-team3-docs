# 01. 프로젝트 개요 및 아키텍처

## 프로젝트 개요

### 프로젝트명
Final3team-jober_to_java (Template Management System)

### 프로젝트 목표
AI 기반 템플릿 생성 및 관리 시스템으로, 사용자가 요청하는 내용에 따라 AI가 자동으로 템플릿을 생성하고 이를 관리할 수 있는 플랫폼

### 주요 기능
- 사용자 인증 및 권한 관리 (JWT 기반)
- AI를 활용한 템플릿 자동 생성
- 템플릿 상태 관리 및 히스토리 추적
- 산업군별, 목적별 템플릿 분류
- 템플릿 변수 및 버튼 관리

## 기술 스택

### Backend Framework
- **Spring Boot 3.5.5**
  - Spring Web MVC
  - Spring Data JPA
  - Spring Security
  - Spring Actuator

### 언어 및 JVM
- **Java 21** (최신 LTS 버전)
- **Maven** (빌드 도구)

### 데이터베이스
- **MySQL 8.0.42**
  - Docker 컨테이너로 운영
  - Flyway를 통한 스키마 마이그레이션
  - HikariCP 커넥션 풀

### 보안
- **JWT (JSON Web Token)**
  - Access Token (30분 유효)
  - Refresh Token (14일 유효)
- **BCrypt** 패스워드 암호화
- **Spring Security** 인증/인가

### 기타 주요 라이브러리
- **Lombok** - 보일러플레이트 코드 제거
- **SpringDoc OpenAPI** - API 문서화 (Swagger)
- **Flyway** - 데이터베이스 마이그레이션

## 시스템 아키텍처

### 전체 구조
```
┌─────────────────┐     ┌─────────────────┐     ┌─────────────────┐
│   Frontend      │────▶│  Spring Boot    │────▶│     MySQL       │
│   (외부)        │     │   Application   │     │   Database      │
└─────────────────┘     └─────────────────┘     └─────────────────┘
                                │
                                ▼
                        ┌─────────────────┐
                        │   AI Server     │
                        │  (External)     │
                        │ 3.38.180.216    │
                        └─────────────────┘
```

### 애플리케이션 레이어 구조
```
┌───────────────────────────────────────┐
│              Controller               │ ← REST API 엔드포인트
├───────────────────────────────────────┤
│              Service                  │ ← 비즈니스 로직
├───────────────────────────────────────┤
│              Repository               │ ← 데이터 액세스
├───────────────────────────────────────┤
│              Entity                   │ ← JPA 엔티티
└───────────────────────────────────────┘
```

### 패키지 구조
```
com.example.final_projects/
├── config/                 # 설정 클래스
│   ├── CorsConfig.java
│   ├── SecurityConfig.java
│   ├── RestClientConfig.java
│   └── swagger/
├── controller/             # REST 컨트롤러
│   ├── AuthController.java
│   ├── TemplateController.java
│   └── DbHealthController.java
├── dto/                    # 데이터 전송 객체
│   ├── auth/
│   ├── template/
│   ├── ApiResponse.java
│   └── PageResponse.java
├── entity/                 # JPA 엔티티
│   ├── User.java
│   ├── Template.java
│   ├── Category.java
│   └── ...
├── repository/             # 데이터 리포지토리
├── service/                # 비즈니스 서비스
├── security/               # 보안 관련 클래스
├── exception/              # 예외 처리
└── common/                 # 공통 유틸리티
```

## 핵심 아키텍처 특징

### 1. JWT 기반 Stateless 인증
- 세션을 사용하지 않는 무상태 인증 방식
- Access Token과 Refresh Token을 통한 보안 강화
- Spring Security Filter Chain을 통한 자동 인증 처리

### 2. AI 외부 연동 시스템
- RestClient를 통한 외부 AI 서버 호출
- 비동기 처리를 통한 사용자 요청 상태 관리
- 에러 핸들링 및 롤백 메커니즘

### 3. 복합 엔티티 관계
- Template을 중심으로 한 복잡한 관계 매핑
- Many-to-Many 관계 (Industry, Purpose)
- One-to-Many 관계 (Variables, Buttons, History)

### 4. 멀티 프로파일 환경
- 기본 프로파일: 개발용 (포트 8080, MySQL 3307)
- dev 프로파일: 배포용 (포트 8580, MySQL 3500, Flyway 활성화)

### 5. 글로벌 예외 처리
- `@RestControllerAdvice`를 통한 중앙집중식 예외 처리
- 표준화된 API 응답 형태
- 사용자 친화적 에러 메시지

### 6. API 문서화
- SpringDoc을 통한 자동 API 문서 생성
- Swagger UI 제공 (`/swagger-ui.html`)
- JWT 인증 테스트 지원

## 데이터 플로우

### 1. 사용자 인증 플로우
```
Client → Login Request → AuthController → AuthService 
     ← JWT Tokens ← LoginResponse ← BCrypt Validation
```

### 2. 템플릿 생성 플로우
```
Client → Template Request → TemplateController → TemplateService
     ← Template Response ← Database ← AI Server Response
```

### 3. 보안 필터 체인
```
HTTP Request → CORS Filter → JWT Authentication Filter 
          → Security Filter → Controller Method
```

이 아키텍처는 확장성, 유지보수성, 보안성을 고려하여 설계되었으며, 마이크로서비스로의 확장도 용이하도록 구성되어 있습니다.